{"changed":true,"filter":false,"title":"MessageBoard.js","tooltip":"/2-labbymezzage/js/MessageBoard.js","value":"\"use strict\";\n\nvar MessageBoard = {\n    \n    messages: [],\n    \n    init: function(){\n        var textMessage;\n        var sendMessage;\n\n        MessageBoard.count();\n                        \n        //Referens till textmeddelandet\n        textMessage = document.getElementById(\"messagearea\");\n        \n        \n        textMessage.focus();\n\n        //Referens till submit-knappen\n        sendMessage = document.getElementById(\"sendmessage\");\n        \n        \n        //FUNGERAR ICKE\n        textMessage.addEventListener(\"keypress\", function(e){\n            if(!e){\n                e = window.event;\n            }\n            \n            if(e.keyCode == 13 && !e.shiftKey){\n                console.log(\"enter pressed\");\n                e.preventDefault();\n                MessageBoard.createMessage();\n            }\n        });\n        \n        sendMessage.addEventListener(\"click\", MessageBoard.createMessage);\n    },\n    \n    createMessage: function(){\n        //Skapa nytt meddelande\n        var text;\n        var newMessage;\n        \n        text = document.getElementById(\"messagearea\").value;\n        \n        //Är fältet tomt så händer ingenting\n        if(text === \"\"){\n            return false;\n        }\n        \n        newMessage = new Message(text, new Date());\n        \n        MessageBoard.messages.push(newMessage);\n        MessageBoard.renderMessages();\n        \n        text = \"\";\n    },\n    \n    renderMessage: function(messageID){\n        //Skriv ut ETT meddelande\n        var viewmessages;\n        var imgClock;\n        var aClock;\n        var imgRemove;\n        var aRemove;\n        var messageText;\n        var spanTime;\n        var time;\n        var hr;\n        \n        MessageBoard.count();\n        viewmessages = document.getElementById(\"viewmessages\");\n        \n    //Tidknapp\nnnnnnnnnn6\n        \n        aClock = document.createElement(\"a\");\n        aClock.setAttribute(\"href\", \"#\");\n        aClock.setAttribute(\"class\", \"right\");\n        aClock.appendChild(imgClock);\n        \n        aClock.addEventListener(\"click\", function(){\n            alert(MessageBoard.messages[messageID].getDateText());\n        });\n        \n    //Ta bort knapp\n        imgRemove = document.createElement(\"img\");\n        imgRemove.setAttribute(\"src\", \"img/remove1.png\");\n        imgRemove.setAttribute(\"alt\", \"delete\");\n        \n        aRemove = document.createElement(\"a\");\n        aRemove.setAttribute(\"href\", \"#\");\n        aRemove.setAttribute(\"class\", \"right\");\n        aRemove.appendChild(imgRemove);\n        \n        aRemove.addEventListener(\"click\",function(){\n            if(confirm(\"Are you sure you want to delete this message?\")){\n                MessageBoard.deleteMessage(messageID);\n            }\n            else{\n                \n            }\n        });\n        \n    //Meddelandetext\n        messageText = document.createElement(\"p\");\n        messageText.innerHTML = MessageBoard.messages[messageID].getHTMLText();\n        \n    //Tidsstämpel\n        var ourTime = new Date();\n        spanTime = document.createElement(\"span\");\n        time = ourTime.toLocaleTimeString();\n        spanTime.innerHTML = time;\n        \n    //HR-tagg\n        hr = document.createElement(\"hr\");\n        \n        viewmessages.appendChild(aClock);\n        viewmessages.appendChild(aRemove);\n        viewmessages.appendChild(messageText);\n        viewmessages.appendChild(spanTime);\n        viewmessages.appendChild(hr);\n        \n    },\n    \n    renderMessages: function(){\n        //Skriv ut ALLA meddelanden\n        \n        document.getElementById(\"viewmessages\").innerHTML = \"\";\n        for(var i = 0; i <= MessageBoard.messages.length; i++){\n            MessageBoard.renderMessage(i);\n        };\n        \n        //Rensar från tidigare utskrifter\n        document.form.messagearea.value = \"\";\n    },\n    \n    deleteMessage: function(messageID){\n        //Radera meddelande\n        MessageBoard.messages.splice(messageID, 1);\n        MessageBoard.count();\n        MessageBoard.renderMessages();\n        //console.log(\"Deleted message \" + messageID.innerHTML);\n    },\n    \n    count: function(){\n        //Räknar antal meddelande\n        \n        var count = document.getElementById(\"count\");\n        count.innerHTML = \"Messages: \" + MessageBoard.messages.length;\n    },\n\n};\nwindow.onload = MessageBoard.init;","undoManager":{"mark":1,"position":5,"stack":[[{"group":"doc","deltas":[{"start":{"row":108,"column":52},"end":{"row":108,"column":53},"action":"insert","lines":["3"]}]}],[{"group":"doc","deltas":[{"start":{"row":108,"column":52},"end":{"row":108,"column":53},"action":"remove","lines":["3"]}]}],[{"group":"doc","deltas":[{"start":{"row":74,"column":0},"end":{"row":76,"column":45},"action":"remove","lines":["        imgClock = document.createElement(\"img\");","        imgClock.setAttribute(\"src\", \"img/clock1.png\");","        imgClock.setAttribute(\"alt\", \"Time\");"]},{"start":{"row":74,"column":0},"end":{"row":74,"column":1},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":74,"column":1},"end":{"row":74,"column":2},"action":"insert","lines":["n"]},{"start":{"row":74,"column":2},"end":{"row":74,"column":3},"action":"insert","lines":["n"]},{"start":{"row":74,"column":3},"end":{"row":74,"column":4},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":74,"column":4},"end":{"row":74,"column":5},"action":"insert","lines":["n"]},{"start":{"row":74,"column":5},"end":{"row":74,"column":6},"action":"insert","lines":["n"]},{"start":{"row":74,"column":6},"end":{"row":74,"column":7},"action":"insert","lines":["n"]},{"start":{"row":74,"column":7},"end":{"row":74,"column":8},"action":"insert","lines":["n"]},{"start":{"row":74,"column":8},"end":{"row":74,"column":9},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":74,"column":9},"end":{"row":74,"column":10},"action":"insert","lines":["6"]}]}]]},"ace":{"folds":[],"scrolltop":560,"scrollleft":0,"selection":{"start":{"row":74,"column":10},"end":{"row":74,"column":10},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1416845569408}